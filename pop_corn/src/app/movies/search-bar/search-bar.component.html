<div class="search-bar-container">
  <div class="search-bar">
    <span class="material-icons search-icon">search</span>
    <input
      type="text"
      [ngModel]="searchQuery()"
      (ngModelChange)="onSearchChange($event)"
      (focus)="isFocused.set(true)"
      (blur)="isFocused.set(false)"
      placeholder="Buscar Filme..."
    />
    <button *ngIf="searchQuery()" class="clear-button" (click)="clearSearch()">
      <span class="material-icons">close</span>
    </button>
  </div>

  <!-- O modal só aparece se houver texto E o input estiver focado -->
  <div class="search-modal" *ngIf="searchQuery() && isFocused()">
    <ul>
      <li *ngFor="let movie of searchResults(); track movie.id">
        <!-- Cada resultado é um link -->
        <a (mousedown)="navigateToMovie(movie.id)">
          <img [src]="movie.image" alt="{{ movie.title }}" class="result-image">
          <div class="result-info">
            <span class="result-title">{{ movie.title }}</span>
            <span class="result-genre">{{ movie.genre }}</span>
          </div>
        </a>
      </li>
      <li *ngIf="searchResults().length === 0" class="no-results">
        Nenhum filme encontrado.
      </li>
    </ul>
  </div>
</div>
